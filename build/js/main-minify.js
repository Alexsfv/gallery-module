!function(){NodeList.prototype.map=function(e){const t=[];return this.forEach((s,n,i)=>{const r=e(s,n,i);r?t.push(r):t.push("")}),t};class e{constructor(e){this.listeners=e.listeners}initDomListeners(){this.listeners.forEach(e=>{const t=this.getEventName(e);this.$el.addEventListener(e,this[t].bind(this))})}getEventName(e){return"on"+e[0].toUpperCase()+e.slice(1)}}class t extends e{constructor(e){super(e),this.$el=e.el,this.initDomListeners(this.$el)}onClick(){event.stopPropagation(),event.target===this.$el&&(l.hiddeApp(),a("unlock"))}}class s{static shortName(){return"containerApp"}constructor(e){this.$el=e}addImageContainer(){return'<div class="img-container__galleryApp">\n            <img src="" alt="#" data-imageOfApp="">\n            <div class="cover-image__galleryApp"></div>\n        </div>'}}class n extends e{constructor(e){super(e),this.$el=e.el,this.initDomListeners(this.$el),this.singlePreset=!0}onClick(){event.stopPropagation(),"previous"===this.direction?l.previousImage():l.nextImage()}}class i extends e{constructor(e,t,s){super({listeners:["click"]}),this.$el=e,this.path=e.src,this.index=t,this.selector=s.selector}onClick(){l.showApp(this),a()}}class r extends t{static shortName(){return"bgClosing"}static className(){return"galleryApp hidden"}constructor(e){super({el:e,listeners:["click"]})}toHTML(){return""}}function o(e){let t=(s=e.selector,document.querySelectorAll(s));var s;images=function(e,t){return e.map((e,s)=>new i(e,s,t))}(t,e),images.forEach(e=>e.initDomListeners(e.img)),l.groups[e.selector]=images}function a(e){const t=c("body");"unlock"===e?t.classList.remove("lock"):t.classList.add("lock")}function c(e){return document.querySelector(e)}const l=new class{constructor(e){this.groups={},this.activeImage={},this.components=e.components||{}}getRoot(){const e=document.createElement("div");e.className="container__galleryApp";const t=new s(e);return t.$el.innerHTML=t.addImageContainer(),this.Elements[s.shortName()]=t,this.initComponents(),t.$el}initComponents(){this.components.forEach(e=>{const t=e.getTagName?e.getTagName():"div",n=document.createElement(t);n.className=e.className();const i=new e(n);i.$el.innerHTML=i.toHTML(),this.Elements[e.shortName()]=i,this.Elements[s.shortName()].$el.appendChild(i.$el)})}build(){this.Elements={};const e=document.createElement("div");e.className=r.className(),this.$root=e;const t=new r(this.$root);this.Elements[r.shortName()]=t,this.Elements[r.shortName()],this.$root.appendChild(this.getRoot()),document.querySelector("body").appendChild(this.$root),delete this.components}showApp(e){this.groups[e.selector].length<=1?this.setSinglePreset():this.setFullPreset(),this.changeImage(e),this.$root.classList.remove("hidden")}hiddeApp(){this.$root.classList.add("hidden")}changeImage(e){const t=c('[data-imageOfApp=""]');this.activeImage=e,t.src=e.path,this.Elements.downloadBtn.changeHref(e)}setSinglePreset(){const e=this.Elements;for(let t in e)e.hasOwnProperty(t)&&e[t].singlePreset&&e[t].$el.classList.add("hidden")}setFullPreset(){const e=this.Elements;for(let t in e)e.hasOwnProperty(t)&&e[t].$el.classList.remove("hidden")}previousImage(){const e=this.activeImage.index;let t;t=0===e?this.groups[this.activeImage.selector].length-1:e-1;const s=this.groups[this.activeImage.selector][t];this.changeImage(s)}nextImage(){const e=this.activeImage.index;let t;t=e===this.groups[this.activeImage.selector].length-1?0:e+1;const s=this.groups[this.activeImage.selector][t];this.changeImage(s)}}({components:[class extends t{static shortName(){return"crossClosing"}static className(){return"close__galleryApp"}constructor(e){super({el:e,listeners:["click"]})}toHTML(){return""}},class extends n{static shortName(){return"slideNext"}static className(){return"btn-wrapper next"}constructor(e){super({el:e,listeners:["click"]})}toHTML(){return'<div class="btn-next__btn-wrapper"></div>'}onClick(){event.stopPropagation(),l.nextImage()}},class extends n{static shortName(){return"slidePrev"}static className(){return"btn-wrapper previous"}constructor(e){super({el:e,listeners:["click"]})}toHTML(){return'<div class="btn-prev__btn-wrapper"></div>'}onClick(){event.stopPropagation(),l.previousImage()}},class extends e{static getTagName(){return"a"}static shortName(){return"downloadBtn"}static className(){return"btn-download__galleryApp"}constructor(e){super({el:e,listeners:[]}),this.$el=e,this.initDomListeners(this.$el),this.$el.download=""}changeHref(e){this.$el.href=e.path}toHTML(){return'<span class="vertical-stick"></span>'}}]});window.addEventListener("load",function(e){l.build(e)}),console.log(l),o({selector:"[data-gallery]"}),o({selector:"[data-gallery-two]"})}();